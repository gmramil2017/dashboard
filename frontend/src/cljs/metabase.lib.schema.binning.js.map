{"version":3,"sources":["metabase/lib/schema/binning.cljc"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUA,AAAAA,4CAAA,sIAAA,mFAAA,qDAAA,+DAAA,4DAAA;AAGA,AAAAA,4CAAA,gHAAA,mFAAA,mDAAA,mFAAA,mDAAA,mFAAA,8DAAA,mFAAA,mDAAA,sJAAA,mFAAA,+DAAA,2CAAA,6DAAA,0CAAA,mFAAA,4DAAA,2CAAA,6DAAA,aAAA,0JAAA,mFAAA,kDAAA,2CAAA,oEAAA,kGAAA,WAAAC,5xBAIiCC;AAJjC,AAOK,IAAAC,qBAAiB,AAAA,4FAAAF;AAAjB,AAAA,oBAAAE;AAAA,AAAA,YAAAA,RAAWC;AAAX,AACE,SAAI,mDAAA,nDAACC,6CAAED,wEACH,0BAAAH,1BAACK,2CAAYF;;AAFnB;;;AAIL,AAAAJ,4CAAA,4HAAA,mFAAA,mDAAA,mFAAA,0DAAA,mFAAA,+CAAA,uFAAA,mFAAA,oEAAA,kEAAA,mFAAA,mDAAA,mFAAA,uDAAA,gIAAA,mFAAA,4DAAA,2CAAA,6DAAA,aAAA","names":["metabase.util.malli.registry/register!","p1__79569#","cljs.core/pos?","temp__5804__auto__","strat","cljs.core._EQ_","cljs.core/contains?"],"sourcesContent":["(ns metabase.lib.schema.binning\n  \"Malli schema for binning of a column's values.\n\n  There are two approaches to binning, selected by `:strategy`:\n  - `{:strategy :bin-width :bin-width 10}` makes 1 or more bins that are 10 wide;\n  - `{:strategy :num-bins  :num-bins  12}` splits the column into 12 bins.\"\n  (:require\n   [metabase.lib.schema.common :as lib.schema.common]\n   [metabase.util.malli.registry :as mr]))\n\n(mr/def ::binning-strategies\n  [:enum :bin-width :default :num-bins])\n\n(mr/def ::binning\n  [:and\n   [:map\n    [:strategy  [:ref ::binning-strategies]]\n    [:bin-width {:optional true} pos?]\n    [:num-bins  {:optional true} ::lib.schema.common/int-greater-than-zero]]\n   [:fn {:error/message \"if :strategy is not :default, the matching key :bin-width or :num-bins must also be set\"}\n    #(when-let [strat (:strategy %)]\n       (or (= strat :default)\n           (contains? % strat)))]])\n\n(mr/def ::binning-option\n  [:map\n   [:lib/type [:= :option/binning]]\n   [:display-name :string]\n   [:mbql [:maybe ::binning]]\n   [:default {:optional true} :boolean]])\n"]}