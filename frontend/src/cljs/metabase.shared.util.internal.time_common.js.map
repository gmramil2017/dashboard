{"version":3,"sources":["metabase/shared/util/internal/time_common.cljc"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,oDAAA,8DAAAA,lHAAOI,gHAASC;AAAhB,AAAA,IAAAJ,aAAAD;IAAAC,iBAAA,AAAAC,4BAAAD;WAAA,AAAAE,4CAAAF,eAAA,lEAA0BK;AAA1B,AAAkC,OAACC,gDAAQD;;AAE3C,GAAA,QAAAE,qCAAAC,4CAAAC,iDAAAC,0DAAAC,sEAAAC;AAAA;AAAA,AAAA;;;;qDAAA,iBAAAC,6BAAA,AAAAC,6CAAA,hJAAUQ;IAAVP,6BAAA,AAAAD,6CAAA;IAAAE,6BAAA,AAAAF,6CAAA;IAAAG,iCAAA,AAAAH,6CAAA;IAAAI,0BAAA,AAAAhB,4CAAA,mCAAA,gEAAA,iBAAAiB,eAAA;AAAA,AAAA,QAAAA,6CAAAA,+CAAAA;;AAAA,AAAA,YAAAC,kBAAA,AAAAC,+CAAA,4CAAA,8DAAA,4DAAAH,wBAAAL,2BAAAE,2BAAAC,2BAAAC,vNAGEd;;;AAEF,GAAA,QAAAI,qCAAAC,4CAAAC,iDAAAC,0DAAAC,sEAAAY;AAAA;AAAA,AAAA;;;;;iEAAA,iBAAAV,6BAAA,AAAAC,6CAAA,5JAAUW;IAAVV,6BAAA,AAAAD,6CAAA;IAAAE,6BAAA,AAAAF,6CAAA;IAAAG,iCAAA,AAAAH,6CAAA;IAAAI,0BAAA,AAAAhB,4CAAA,mCAAA,gEAAA,iBAAAsB,eAAA;AAAA,AAAA,QAAAA,6CAAAA,+CAAAA;;AAAA,AAAA,YAAAJ,kBAAA,AAAAC,+CAAA,4CAAA,uEAAA,4DAAAH,wBAAAL,2BAAAE,2BAAAC,2BAAAC,vNAIEd;;;AAEF,GAAA,QAAAI,qCAAAC,4CAAAC,iDAAAC,0DAAAC,sEAAAe;AAAA;AAAA,AAAA;;;;;;;;;;iEAAA,iBAAAb,6BAAA,AAAAC,6CAAA,5JAAUc;IAAVb,6BAAA,AAAAD,6CAAA;IAAAE,6BAAA,AAAAF,6CAAA;IAAAG,iCAAA,AAAAH,6CAAA;IAAAI,0BAAA,AAAAhB,4CAAA,mCAAA,gEAAA,iBAAAyB,eAAA;AAAA,AAAA,QAAAA,6CAAAA,+CAAAA;;AAAA,AAAA,YAAAP,kBAAA,AAAAC,+CAAA,4CAAA,uEAAA,4DAAAH,wBAAAL,2BAAAE,2BAAAC,2BAAAC,vNASEd;;;AAEF;;;oEAAA,pEAAM0B,gJAEHC;AAFH,AAGE,IAAAC,mBAAI,AAACC,iBAAO,qBAAA,rBAACC,8CAAqCH;AAAlD,AAAA,oBAAAC;AAAAA;;AACID","names":["p__80200","map__80201","cljs.core/--destructure-map","cljs.core.get","metabase.shared.util.internal.time-common/by-unit","_","unit","cljs.core.keyword","js/metabase","js/metabase.shared","js/metabase.shared.util","js/metabase.shared.util.internal","js/metabase.shared.util.internal.time-common","js/metabase.shared.util.internal.time-common.to-range","method-table__5642__auto__","cljs.core.atom","prefer-table__5643__auto__","method-cache__5644__auto__","cached-hierarchy__5645__auto__","hierarchy__5646__auto__","fexpr__80203","cljs.core/MultiFn","cljs.core.symbol","metabase.shared.util.internal.time-common/to-range","js/metabase.shared.util.internal.time-common.string->timestamp","fexpr__80211","metabase.shared.util.internal.time-common/string->timestamp","js/metabase.shared.util.internal.time-common.number->timestamp","fexpr__80213","metabase.shared.util.internal.time-common/number->timestamp","metabase.shared.util.internal.time-common/drop-trailing-time-zone","time-str","or__5045__auto__","cljs.core/second","cljs.core/re-matches"],"sourcesContent":["(ns metabase.shared.util.internal.time-common\n  \"Shared core of time utils used by the internal CLJ and CLJS implementations.\n  See [[metabase.shared.util.time]] for the public interface.\")\n\n(defn- by-unit [_ {:keys [unit]}] (keyword unit))\n\n(defmulti to-range\n  \"Given a datetime and a unit (eg. \\\"hour\\\"), returns an *inclusive* datetime range as a pair of datetimes.\n  For a unit of an hour, and a datetime for 13:49:28, that means [13:00:00 13:59:59.999], ie. 1 ms before the end.\"\n  by-unit)\n\n(defmulti string->timestamp\n  \"Given a string representation of a datetime and the `options` map, parses the string as a representation of the\n  `:unit` option (eg. \\\"hour\\\").\n  Returns a platform-specific datetime.\"\n  by-unit)\n\n(defmulti number->timestamp\n  \"Given a numeric representation of a datetime and the `options` map, interprets the number based on the `:unit` option\n  (eg. \\\"day-of-week\\\").\n\n  Note that for two relative units - `day-of-month` and `day-of-year` - an arbitrary date is generated, not necessarily\n  one in the current month or year. When grouping user data by day-of-month, it doesn't matter whether the current month\n  has 31 days or not.\n\n  Returns a platform-specific datetime.\"\n  by-unit)\n\n(defn drop-trailing-time-zone\n  \"Strips off a trailing +0500, -0430, or Z from a time string.\"\n  [time-str]\n  (or (second (re-matches #\"(.*?)(?:Z|[+-][\\d:]+)$\" time-str))\n      time-str))\n"]}