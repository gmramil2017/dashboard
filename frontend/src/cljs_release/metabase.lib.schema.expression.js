var window=global;var $CLJS=require("./cljs_env.js");require("./cljs.core.js");require("./metabase.lib.dispatch.js");require("./metabase.lib.hierarchy.js");require("./metabase.lib.schema.common.js");require("./metabase.shared.util.i18n.js");require("./metabase.types.js");require("./metabase.util.malli.js");require("./metabase.util.malli.registry.js");
'use strict';var JK,OK,Rga,Sga,Tga,Uga,Vga,Wga;
$CLJS.IK=function(){function a(){return Math.floor(16*Math.random()).toString(16)}var b=(8|3&Math.floor(16*Math.random())).toString(16);return $CLJS.tu([$CLJS.p.g(a()),$CLJS.p.g(a()),$CLJS.p.g(a()),$CLJS.p.g(a()),$CLJS.p.g(a()),$CLJS.p.g(a()),$CLJS.p.g(a()),$CLJS.p.g(a()),"-",$CLJS.p.g(a()),$CLJS.p.g(a()),$CLJS.p.g(a()),$CLJS.p.g(a()),"-4",$CLJS.p.g(a()),$CLJS.p.g(a()),$CLJS.p.g(a()),"-",$CLJS.p.g(b),$CLJS.p.g(a()),$CLJS.p.g(a()),$CLJS.p.g(a()),"-",$CLJS.p.g(a()),$CLJS.p.g(a()),$CLJS.p.g(a()),$CLJS.p.g(a()),
$CLJS.p.g(a()),$CLJS.p.g(a()),$CLJS.p.g(a()),$CLJS.p.g(a()),$CLJS.p.g(a()),$CLJS.p.g(a()),$CLJS.p.g(a()),$CLJS.p.g(a())].join(""))};JK=function(a){return $CLJS.qe(a)&&$CLJS.C(a)instanceof $CLJS.N};$CLJS.LK=function(a){var b=function(){var c=JK(a);return c?(c=$CLJS.oe($CLJS.Zd(a)))?(c=$CLJS.qk.g($CLJS.Zd(a)),$CLJS.m(c)?c:$CLJS.LF.g($CLJS.Zd(a))):c:c}();return $CLJS.m(b)?b:$CLJS.KK.g(a)};
OK=function(a,b){return new $CLJS.R(null,3,5,$CLJS.S,[$CLJS.Qj,new $CLJS.R(null,3,5,$CLJS.S,[$CLJS.Gk,new $CLJS.R(null,3,5,$CLJS.S,[$CLJS.pt,new $CLJS.k(null,2,[$CLJS.Wu,"valid MBQL clause",$CLJS.Yu,function(c){c=$CLJS.Uf(c);c=$CLJS.M.h(c,$CLJS.vl);return["invalid MBQL clause: ",$CLJS.gj.l($CLJS.J([c]))].join("")}],null),$CLJS.dg(JK)],null),new $CLJS.R(null,2,5,$CLJS.S,[$CLJS.nq,$CLJS.MK],null)],null),new $CLJS.R(null,3,5,$CLJS.S,[$CLJS.pt,new $CLJS.k(null,1,[$CLJS.Wu,b],null),function(c){c=$CLJS.LK(c);
return NK(c,a)}],null)],null)};Rga=new $CLJS.N("metabase.lib.schema.expression","datetime","metabase.lib.schema.expression/datetime",-51960022);Sga=new $CLJS.N("metabase.lib.schema.expression","base-type","metabase.lib.schema.expression/base-type",578343967);Tga=new $CLJS.N("metabase.lib.schema.expression","non-integer-real","metabase.lib.schema.expression/non-integer-real",-1855491016);$CLJS.PK=new $CLJS.N(null,"expr","expr",745722291);
$CLJS.QK=new $CLJS.N("metabase.lib.schema.expression","expressions","metabase.lib.schema.expression/expressions",790922225);$CLJS.RK=new $CLJS.N("metabase.lib.schema.expression","temporal","metabase.lib.schema.expression/temporal",320116754);$CLJS.SK=new $CLJS.N("metabase.lib.schema.expression","boolean","metabase.lib.schema.expression/boolean",-1396506592);$CLJS.TK=new $CLJS.N("metabase.lib.schema.expression","expression","metabase.lib.schema.expression/expression",-1389098704);
$CLJS.UK=new $CLJS.N("metabase.lib.schema.expression","type.unknown","metabase.lib.schema.expression/type.unknown",-98159107);$CLJS.VK=new $CLJS.N("lib","expression-name","lib/expression-name",-1799326590);Uga=new $CLJS.N("metabase.lib.schema.expression","date","metabase.lib.schema.expression/date",1943847782);$CLJS.WK=new $CLJS.N("metabase.lib.schema.expression","equality-comparable","metabase.lib.schema.expression/equality-comparable",-658449046);
$CLJS.XK=new $CLJS.N("lib.type-of","type-is-type-of-first-arg","lib.type-of/type-is-type-of-first-arg",-317600808);$CLJS.YK=new $CLJS.N("metabase.lib.schema.expression","orderable","metabase.lib.schema.expression/orderable",-1555566130);Vga=new $CLJS.w("metabase.lib.schema.expression","type-of","metabase.lib.schema.expression/type-of",-1625245814,null);Wga=new $CLJS.N("metabase.lib.schema.expression","time","metabase.lib.schema.expression/time",865466446);
$CLJS.MK=new $CLJS.N("metabase.lib.schema.mbql-clause","clause","metabase.lib.schema.mbql-clause/clause",955279388);$CLJS.ZK=new $CLJS.N("metabase.lib.schema.expression","string","metabase.lib.schema.expression/string",1750008170);$CLJS.$K=new $CLJS.N("metabase.lib.schema.expression","number","metabase.lib.schema.expression/number",779948930);$CLJS.aL=new $CLJS.N("metabase.lib.schema.expression","integer","metabase.lib.schema.expression/integer",2060430870);$CLJS.KK=function(){var a=$CLJS.ij.g($CLJS.P),b=$CLJS.ij.g($CLJS.P),c=$CLJS.ij.g($CLJS.P),d=$CLJS.ij.g($CLJS.P),e=$CLJS.M.j(new $CLJS.k(null,1,[$CLJS.Vk,$CLJS.MG],null),$CLJS.Vk,$CLJS.rj.A?$CLJS.rj.A():$CLJS.rj.call(null));return new $CLJS.Aj($CLJS.$i.h("metabase.lib.schema.expression","type-of-method"),function(f){var g=$CLJS.LG(f);return $CLJS.F.h(g,$CLJS.KF)?$CLJS.Nb(f):g},$CLJS.Uj,e,a,b,c,d)}();
$CLJS.rK(Sga,new $CLJS.R(null,3,5,$CLJS.S,[$CLJS.Gk,new $CLJS.R(null,2,5,$CLJS.S,[$CLJS.lm,$CLJS.UK],null),$CLJS.FK],null));$CLJS.KK.o(null,$CLJS.Uj,function(a){throw $CLJS.Ej($CLJS.aH("{0}: Don''t know how to determine the type of {1}",$CLJS.J([Vga,$CLJS.gj.l($CLJS.J([a]))])),new $CLJS.k(null,1,[$CLJS.PK,a],null));});$CLJS.KK.o(null,$CLJS.XK,function(a){$CLJS.K(a,0,null);$CLJS.K(a,1,null);a=$CLJS.K(a,2,null);return $CLJS.LK(a)});
var NK=function NK(a,b){return $CLJS.le(a)?$CLJS.ag(function(d){return NK.h?NK.h(d,b):NK.call(null,d,b)},a):$CLJS.le(b)?$CLJS.ag(function(d){return NK.h?NK.h(a,d):NK.call(null,a,d)},b):$CLJS.F.h(a,$CLJS.UK)?!0:$CLJS.XG(a,b)};$CLJS.rK($CLJS.SK,OK($CLJS.Fl,"expression returning a boolean"));$CLJS.rK($CLJS.ZK,OK($CLJS.Xl,"expression returning a string"));$CLJS.rK($CLJS.aL,OK($CLJS.nl,"expression returning an integer"));$CLJS.rK(Tga,OK($CLJS.QJ,"expression returning a non-integer real number"));
$CLJS.rK($CLJS.$K,OK($CLJS.Jl,"expression returning a number"));$CLJS.rK(Uga,OK($CLJS.UH,"expression returning a date"));$CLJS.rK(Wga,OK($CLJS.eK,"expression returning a time"));$CLJS.rK(Rga,OK($CLJS.YI,"expression returning a date time"));$CLJS.rK($CLJS.RK,OK($CLJS.Ql,"expression returning a date, time, or date time"));$CLJS.bL=new $CLJS.ti(null,new $CLJS.k(null,3,[$CLJS.Jl,null,$CLJS.Xl,null,$CLJS.Ql,null],null),null);$CLJS.rK($CLJS.YK,OK($CLJS.bL,"an expression that can be compared with :\x3e or :\x3c"));
$CLJS.rK($CLJS.WK,new $CLJS.R(null,2,5,$CLJS.S,[$CLJS.rt,OK(new $CLJS.ti(null,new $CLJS.k(null,4,[$CLJS.Jl,null,$CLJS.Xl,null,$CLJS.Ql,null,$CLJS.Fl,null],null),null),"an expression that can appear in :\x3d or :!\x3d")],null));$CLJS.rK($CLJS.TK,new $CLJS.R(null,2,5,$CLJS.S,[$CLJS.rt,OK($CLJS.sl,"any type of expression")],null));
$CLJS.rK($CLJS.QK,new $CLJS.R(null,3,5,$CLJS.S,[$CLJS.rl,new $CLJS.k(null,1,[$CLJS.vk,1],null),new $CLJS.R(null,3,5,$CLJS.S,[$CLJS.Qj,new $CLJS.R(null,2,5,$CLJS.S,[$CLJS.nq,$CLJS.TK],null),new $CLJS.R(null,4,5,$CLJS.S,[$CLJS.ft,$CLJS.Et,new $CLJS.R(null,2,5,$CLJS.S,[$CLJS.bm,new $CLJS.R(null,2,5,$CLJS.S,[$CLJS.VK,$CLJS.Tl],null)],null),new $CLJS.R(null,2,5,$CLJS.S,[$CLJS.sm,$CLJS.Et],null)],null)],null)],null));